<script>
  function changeName() {
    document.getElementById('signatureName').innerHTML = document.querySelector('input[name=name]').value;
  }
  function changeJob() {
    var e = document.querySelector('select[name=job]');
    document.getElementById('signatureJob').innerHTML = e.options[e.selectedIndex].text;
  }
  function getFormattedUkTel() {
    return "+44 " + document.querySelector('input[name=ukTel]').value;
  }
  function displayCountry() {
    document.querySelector("#signatureFrTelGroup .country").style.display = "initial"
    document.querySelector("#signatureUkTelGroup .country").style.display = "initial"
  }
  function hideCountry() {
    document.querySelector("#signatureFrTelGroup .country").style.display = "none"
    document.querySelector("#signatureUkTelGroup .country").style.display = "none"
  }
  function changeTel() {
    var userInputFr = document.querySelector('input[name=frTel]').value;
    var frTelNoSpace = userInputFr.replace(/\D/g, '')
    var formattedInputFr = '';
    for(var i = 0; i<frTelNoSpace.length; i++) {
      if((i % 2) === 1) {
        formattedInputFr += ' ';
      }
      formattedInputFr += frTelNoSpace.charAt(i);
    }
    document.querySelector('input[name=frTel]').value = formattedInputFr;
    document.getElementById('signatureFrTel').innerHTML = '+33 ' + formattedInputFr;
    document.getElementById('signatureFrTel').setAttribute("href", "tel:+33" + frTelNoSpace);

    var userInputUk = document.querySelector('input[name=ukTel]').value;
    var ukTelNoSpace = userInputUk.replace(/\D/g, '')

    document.getElementById('signatureUkTel').innerHTML = '+44 ' + userInputUk;
    document.getElementById('signatureUkTel').setAttribute("href", "tel:+44" + ukTelNoSpace);

    if(frTelNoSpace.length > 0) {
      document.getElementById("signatureFrTelGroup").style.display = "block";
    }
    if(ukTelNoSpace.length > 0) {
      document.getElementById("signatureUkTelGroup").style.display = "block";
    }
    if(frTelNoSpace.length > 0 && ukTelNoSpace.length > 0) {
      displayCountry();
    }
    if(frTelNoSpace.length === 0) {
      document.getElementById("signatureFrTelGroup").style.display = "none";
      hideCountry();
    }
    if(ukTelNoSpace.length === 0) {
      document.getElementById("signatureUkTelGroup").style.display = "none";
      hideCountry();
    }
  }

  function displayCode() {
    var code = document.getElementById("signature").innerHTML;
    code = code.replace(/&/g, '&amp;');
    code = code.replace(/</g, '&lt;');
    code = code.replace(/>/g, '&gt;');
    document.getElementById("signatureCode").innerHTML = code;
  }

  function selectContent(elId) {
    var el = document.getElementById(elId);
    var body = document.body, range, sel;
    if (document.createRange && window.getSelection) {
      range = document.createRange();
      sel = window.getSelection();
      sel.removeAllRanges();
      try {
        range.selectNodeContents(el);
      } catch (e) {
        range.selectNode(el);
      }
      sel.addRange(range);
      document.execCommand("copy");
    } else if (body.createTextRange) {
      range = body.createTextRange();
      range.moveToElementText(el);
      range.select();
      range.execCommand("Copy");
    }
  }
</script>

<h3>Edit your signature</h3>
<br/>
<table style="margin: 0 50px; display: inline-block; vertical-align: middle;">
  <tr>
    <td>Firstname + Name</td><td style="text-align: right;"><input type="text" name="name" oninput="changeName()" style="width: 227px;"/></td>
  </tr>
  <tr>
    <td>Job Title</td>
    <td style="text-align: right; width: 227px;">
      <select name="job" onchange="changeJob()">
        <option></option>
        <option>Agile web developer</option>
        <option>Architect developer</option>
        <option>Agile coach</option>
        <option>Project Director</option>
        <option>Operations and finance & Agile coach</option>
        <option>Cofounder</option>
        <option>CTO</option>
        <option>CEO</option>
        <option>Chief Sales Officer</option>
        <option>Chief Growth Officer</option>
        <option>Deputy CTO</option>
      </select>
    </td>
  </tr>
  <tr>
    <td>French Tel</td><td>+33 <input type="tel" name="frTel" oninput="changeTel()" onblur="changeTel()" style="width: 227px;"/></td>
  </tr>
  <tr>
    <td>UK Tel</td><td>+44 <input type="tel" name="ukTel" oninput="changeTel()" onblur="changeTel()" style="width: 227px;"/></td>
  </tr>
</table>

<div id="signature" style="display: inline-block; vertical-align: middle;">
  <table style="height: 90px; font-family:sans-serif; color: rgb(102,102,102); font-size: 11px;">
    <tbody>
      <tr>
        <td><a href="https://www.theodo.fr" target="_blank"><img src="https://www.theodo.fr/hs-fs/hubfs/theodologo-ConvertImage.png?t=1512551767947&width=574&name=theodologo-ConvertImage.png" style="height: 90px; vertical-align: middle;" alt="Theodo"/></a></td>
        <td>
          <span style="display:inline-block; margin-left: 10px; vertical-align: middle;">
            <h2 id="signatureName" style="font-size: 18px; font-weight: bold; margin: 0; padding: 0; color: rgb(40,90,162);">Beno√Æt Charles-Lavauzelle</h2>
            <div id="signatureJob" style="font-size: 16px; color: rgb(111,194,183); margin-bottom: 10px;">Cofounder</div>
            <div id="signatureFrTelGroup"><span class="country" style="display: none; line-height: 1.2em;">FR </span><a style="color: rgb(40,90,162);" href="tel:+33612345678" id="signatureFrTel">+33 6 12 34 56 78</a></div>
            <div id="signatureUkTelGroup" style="display: none; line-height: 1.2em;"><span class="country" style="display: none;">UK </span><a style="color: rgb(40,90,162);" id="signatureUkTel"></a></div>
            <div style="margin-top: 2px; line-height: 1.2em;">48 bd des Batignolles</br>75017 Paris</div>
          </span>
        </td>
      </tr>
    </tbody>
  </table>
  <br/>
</div>
<br/>
<br/>

<table style="border-collapse: collapse; border-top: 1px solid grey; border-bottom: 1px solid grey;">
  <tr>
    <td><h3>Gmail</h3></td>
    <td>
      <ol style="display: inline-block; vertical-align: middle;">
        <li>Fill the form !</li>
        <li><input style="" type="button" value="Copy your signature" onclick="selectContent('signature'); this.style.color = 'green';"/></li>
        <li>In your <a href="https://mail.google.com/mail/u/0/#settings/general" target="_blank">Gmail settings</a>, you will have to :
          <ol>
            <li>Paste your signature</li>
            <li><strong style="color: red;">Check</strong> the box below the signature</li>
            <li><strong style="color: red;">Save</strong> your changes</li>
          </ol>
        </li>
        <li><strong style="color: red;">Refresh</strong> all your Gmail tabs</li>
      </ol>
      <img src="gmail.png" style="max-height: 400px; max-width: 600px; vertical-align: middle;"/>
    </td>
  </tr>
  <tr style="border-top: 1px solid grey;">
    <td><h3>Inbox</h3></td>
    <td>
      <ol>
        <li>Fill the form !</li>
        <li><input style="" type="button" value="Copy your signature" onclick="selectContent('signature'); this.style.color = 'green';"/></li>
        <li>Paste it in your Inbox settings</li>
        <li><strong style="color: red;">Refresh</strong> all your Inbox tabs</li>
      </ol>
    </td>
  </tr>
  <tr style="border-top: 1px solid grey;">
    <td><h3>Hubspot</h3></td>
    <td>
      <ol style="display: inline-block; vertical-align: middle;">
        <li>Fill the form !</li>
        <li><input type="button" value="Copy your signature's code" onclick="displayCode(); selectContent('signatureCode'); this.style.color = 'green'; document.getElementById('signatureCode').style.display = 'none';"/></li>
        <li>Paste it in Hubspot, Profile & Preferences > Edit Signature > HTML tab</li>
        <li>Save</li>
      </ol>
      <img src="hubspot.jpeg" style="max-height: 400px; max-width: 600px; vertical-align: middle;"/>
    </td>
  </tr>
  <tr style="border-top: 1px solid grey;">
    <td><h3>Mail on OSX</h3></td>
    <td>
      <ol style="display: inline-block; vertical-align: middle; max-width: 400px;">
        <li>Fill the form !</li>
        <li><input type="button" value="Copy your signature's code" onclick="displayCode(); selectContent('signatureCode'); this.style.color = 'green'; document.getElementById('signatureCode').style.display = 'none';"/></li>
        <li>In Mail
          <ul style="list-style:square;">
            <li><input type="checkbox"/> Open the Preference pane &gt; Signatures tab</li>
            <li><input type="checkbox"/> Add a signature to your Theodo account by clicking on the + button. (The content of the signature does not matter).</li>
            <li><input type="checkbox"/> <strong style="color: red;">Close</strong> the Preference pane to save the signature</li>
          </ul>
        </li>
        <li>In your finder
          <ul style="list-style:square;">
            <li><input type="checkbox"/> Press Cmd + G, and go to ~/Library/Mail</li>
            <li><input type="checkbox"/> In the open folder, there should be a folder starting with 'V' ('V2, 'V3', 'V4') depending on your version of Mac OS. Open this folder, then MailData then Signatures</li>
            <li><input type="checkbox"/> In the list of files with extension <em>.mailsignature</em>, find the signature you just added (find it by date of creation if needed)</li>
            <li><input type="checkbox"/> Open this signature file with TextEdit and remove the second part as in the picture</li>
            <li> Paste the signature's code in the file</li>
            <li><input type="checkbox"/> Save and close the file</li>
            <li><input type="checkbox"/> Open the file information panel (Cmd + i on file highlighted) and <strong style="color: red;">lock</strong> the file to prevent Mail from erasing your signature</li>
          </ul>
        </li>
        <li><strong style="color: red;">Restart Mail</strong></li>
      </ol>
      <img src="appleMail.png" style="max-height: 400px; max-width: 600px; vertical-align: middle;"/>
    </td>
  </tr>
  <tr style="border-top: 1px solid grey;">
    <td><h3>Mail on iOS</h3></td>
    <td>
      <ol>
        <li>Fill the form !</li>
        <li><input style="" type="button" value="Copy your signature" onclick="selectContent('signature'); this.style.color = 'green';"/></li>
        <li>Paste it to Settings/Mail/Signature.</li>
        <li>The signature will appear unformated, so <strong style="color: red;">shake your iPhone</strong> to undo automatic modifications. It should now appear correctly.</li>
        <li>Just quit your settings</li>
      </ol>
    </td>
  </tr>
</table>

<pre style="background-color: grey;"><code id="signatureCode"></code></pre>
