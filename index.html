<script>
  function changeName() {
    document.getElementById('signatureName').innerHTML = document.querySelector('input[name=name]').value;
  }
  function changeJob() {
    document.getElementById('signatureJob').innerHTML = document.querySelector('input[name=job]').value;
  }
  function getFrTel() {
    return "+33 " + document.querySelector('input[name=frTel]').value;
  }
  function getUkTel() {
    return "+44 " + document.querySelector('input[name=ukTel]').value;
  }
  function displayCountry() {
    document.querySelector("#signatureFrTelGroup .country").style.display = "initial"
    document.querySelector("#signatureUkTelGroup .country").style.display = "initial"
  }
  function hideCountry() {
    document.querySelector("#signatureFrTelGroup .country").style.display = "none"
    document.querySelector("#signatureUkTelGroup .country").style.display = "none"
  }
  function changeTel() {
    frTel = getFrTel();
    ukTel = getUkTel();

    document.getElementById('signatureFrTel').innerHTML = frTel;
    document.getElementById('signatureFrTel').setAttribute("href", "tel:+" + frTel.replace(/\D/g, ''));
    document.getElementById('signatureUkTel').innerHTML = ukTel;
    document.getElementById('signatureUkTel').setAttribute("href", "tel:+" + ukTel.replace(/\D/g, ''));

    if(frTel.length > 4) {
      document.getElementById("signatureFrTelGroup").style.display = "block";
    }
    if(ukTel.length > 4) {
      document.getElementById("signatureUkTelGroup").style.display = "block";
    }
    if(frTel.length > 4 && ukTel.length > 4) {
      displayCountry();
    }
    if(frTel.length === 4) {
      document.getElementById("signatureFrTelGroup").style.display = "none";
      hideCountry();
    }
    if(ukTel.length === 4) {
      document.getElementById("signatureUkTelGroup").style.display = "none";
      hideCountry();
    }
  }

  function displayCode() {
    var code = document.getElementById("signature").innerHTML;
    code = code.replace(/&/g, '&amp;');
    code = code.replace(/</g, '&lt;');
    code = code.replace(/>/g, '&gt;');
    document.getElementById("signatureCode").innerHTML = code;
  }

  function selectContent(elId) {
    var el = document.getElementById(elId);
    var body = document.body, range, sel;
    if (document.createRange && window.getSelection) {
      range = document.createRange();
      sel = window.getSelection();
      sel.removeAllRanges();
      try {
        range.selectNodeContents(el);
      } catch (e) {
        range.selectNode(el);
      }
      sel.addRange(range);
      document.execCommand("copy");
    } else if (body.createTextRange) {
      range = body.createTextRange();
      range.moveToElementText(el);
      range.select();
      range.execCommand("Copy");
    }
  }

  function useJob(jobId) {
    document.getElementById('signatureJob').innerHTML = document.getElementById(jobId).innerHTML;
  }
</script>

<h3>Edit your signature</h3>

<table style="margin: 0 50px; display: inline-block; vertical-align: middle;">
  <tr>
    <td>Name</td><td style="text-align: right;"><input type="text" name="name" oninput="changeName()"/></td>
  </tr>
  <tr>
    <td>Job Title<sup style="font-size: x-small;">1</sup></td><td style="text-align: right;"><input type="text" name="job" oninput="changeJob()"/></td>
  </tr>
  <tr>
    <td>French Tel</td><td>+33 <input type="tel" name="frTel" oninput="changeTel()" onblur="changeTel()"/></td>
  </tr>
  <tr>
    <td>UK Tel</td><td>+44 <input type="tel" name="ukTel" oninput="changeTel()" onblur="changeTel()"/></td>
  </tr>
</table>


<div id="signature" style="display: inline-block; vertical-align: middle;">
  <table style="height: 90px; font-family:sans-serif; color: rgb(102,102,102); font-size: 11px;">
    <tbody>
      <tr>
        <td><a href="https://www.theodo.fr" target="_blank"><img src="https://www.theodo.fr/hs-fs/hubfs/theodologo-ConvertImage.png?t=1512551767947&width=574&name=theodologo-ConvertImage.png" style="height: 90px; vertical-align: middle;" alt="Theodo"/></a></td>
        <td>
          <span style="display:inline-block; margin-left: 10px; vertical-align: middle;">
            <h2 id="signatureName" style="font-size: 18px; font-weight: bold; margin: 0; padding: 0; color: rgb(40,90,162);">Beno√Æt Charles-Lavauzelle</h2>
            <div id="signatureJob" style="font-size: 16px; color: rgb(111,194,183); margin-bottom: 10px;">Cofounder</div>
            <div id="signatureFrTelGroup"><span class="country" style="display: none;">FR </span><a style="color: rgb(40,90,162);" href="tel:+33612345678" id="signatureFrTel">+33 6 12 34 56 78</a></div>
            <div id="signatureUkTelGroup" style="display: none;"><span class="country" style="display: none;">UK </span><a style="color: rgb(40,90,162);" id="signatureUkTel"></a></div>
            <div style="margin-top: 2px;">48 bd des Batignolles</br>75017 Paris</div>
          </span>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<br/>
<br/>
<em style="display: block;">1 : Standard job titles include
  <ul style="margin-top: 0;">
    <li><span id="jobBizDev">Agile coach & Business Developer</span> <button onclick="useJob('jobBizDev')">Use it</button></li>
    <li><span id="jobWebDev">Agile web developer</span> <button onclick="useJob('jobWebDev')">Use it</button></li>
  </ul>
</em>

<div style="font-size: 20px; max-width: 800px;">
  <h3>Gmail</h3>
  <ol>
    <li>Fill the form !</li>
    <li>Go to <a href="https://mail.google.com/mail/u/0/#settings/general" target="_blank">Gmail settings</a> or got to Inbox settings if you use Inbox</li>
    <li>Remove everything from the signature field (Cmd + a, delete)</li>
    <li><input style="" type="button" value="Copy" onclick="selectContent('signature'); this.style.color = 'green';"/> and paste your signature</li>
    <li>Check the box below the signature</li>
    <li>Save your changes</li>
  </ol>

  <h3>Apple Mail</h3>
  <ol>
    <li><input type="checkbox"/> Fill the form !</li>
    <li><input type="checkbox"/> In Mail, open the Preference pane &gt; Signatures tab</li>
    <li><input type="checkbox"/> Add a signature to your Theodo account by clicking on the + button. (The content of the signature does not matter).</li>
    <li><input type="checkbox"/> Close the Preference pane to save the signature</li>
    <li><input type="checkbox"/> In your finder, press Cmd + G, and go to ~/Library/Mail</li>
    <li><input type="checkbox"/> In the open folder, there should be a folder starting with 'V' ('V2, 'V3', 'V4') depending on your version of Mac OS. Open this folder, then MailData then Signatures</li>
    <li><input type="checkbox"/> In the list of files with extension <em>.mailsignature</em>, find the signature you just added (find it by date of creation if needed)</li>
    <li><input type="checkbox"/> Open this signature file with TextEdit and remove the second part as in the picture<br/>
      <img src="Signature-edit.png" alt="" width="300" height="193" /></li>
    <li><input type="button" value="Copy" onclick="displayCode(); selectContent('signatureCode'); this.style.color = 'green'; document.getElementById('signatureCode').style.display = 'none';"/> and paste the signature code in the file</li>
    <li><input type="checkbox"/> Save and close the file</li>
    <li><input type="checkbox"/> Open the file information panel (Cmd + i on file highlighted) and lock the file to prevent Mail from erasing your signature</li>
    <li><input type="checkbox"/> Restart Mail</li>
  </ol>

  <h3>Adding your signature to Mail on iOS</h3>
  <ol>
    <li>Fill the form !</li>
    <li>Send yourself an email with your signature correctly formatted and, on your iPhone, copy it carefully (or <input style="" type="button" value="Copy signature" onclick="selectContent('signature'); this.style.color = 'green';"/>)</li>
    <li>Navigate to Settings/Mail/Signature and paste it. The signature will appear unformated, so <strong>shake your iPhone</strong> to undo automatic modifications. It should now appear correctly.</li>
    <li>You can quit your settings and write a new mail to test everything works fine.</li>
  </ol>
</div>
<pre style="background-color: grey;"><code id="signatureCode"></code></pre>
